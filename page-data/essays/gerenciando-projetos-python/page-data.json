{"componentChunkName":"component---src-templates-essay-template-js","path":"/essays/gerenciando-projetos-python/","result":{"data":{"markdownRemark":{"id":"a52853cf-7589-57f7-81d5-30aae2187022","excerpt":"Neste artigo vou apresentar o Pipenv para gerenciar ambientes de desenvolvimento Python. Gerenciar o ambiente de desenvolvimento e as dependências dos projetos…","html":"<p>Neste artigo vou apresentar o <a href=\"https://docs.pipenv.org/en/latest/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Pipenv</a> para gerenciar ambientes de desenvolvimento Python.</p>\n<p>Gerenciar o ambiente de desenvolvimento e as dependências dos projetos de software é um problema bem solucionado em algumas linguagens. Para quem desenvolve em vários ambientes é impossível não comparar. Programo constantemente em linguagens como JavaScript, Ruby e Python, boa parte do tempo nas duas primeiras, e sempre que vou trabalhar em um projeto em Python sinto um constrangimento em como tenho que gerenciar o ambiente de desenvolvimento.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 590px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ac46617f34bab1f4930c36e2de8b25d8/91b29/xkcd.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 99.32432432432432%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAACm0lEQVQ4y0XU2U5qQRAF0PP/H2KiD0ZD4oBEMCIKKirggAODClcREVDAIepdnCaxH7C6uoa9d9Uxajabg8Gg3+/3er1ut3t7e1sqlS4uLo6Pj6+vr//F5+Hhgf/u7q7RaDBEDofDWq0WSfv9/f34+Hh8fGy1WnK2t7cPDg7S6XSxWKzX66+vr19fX/wnJyf7+/uXl5ff399Snp+fo5eXF5mZTMab++fnp4enpye2NIZrNz7BI/Pn5yc4Z501gT+EdjodcaPR6PDwcHFxcX5+fnNzk/Pt7U0nYZPJZDweQxq1222suJA5Pz/f2NhYWVlhgIDq0dER/MjX45NIJLyqtbOzc3V1FXHt7u5SSB/EVldXPRcKhfv7exWxVYINEYxgg4AmCPzRID6UFKHEzc2NZ2J6liC6Wq0CogdS8hloQ07dCHTUqSVIw1wup5CqQuWQFzxX8/O6sLCwtLQkBv9psqGBV4qP0L29PeQVYge1DMJ4IYLLFM/OzjwBO1XbHxiG8YHKGNUql8v6q0Iqy8BTqVTobwrCCOFX1yhwk5bNZmmGBf2Xl5ehVQg2JeSEQQo2ZL9m8ZcsRyt4gCf+3NxcMpmUGQhLNk4QjPf9/d11tiRgk95DEFBbaq+treGprlcdSAAXwYSJ+dswPalPQPusD248unlzVUg5dAipEORY4DxL7sRHn7BDp6enaqMgjsLSLBkuxmaFNWcoPUumG9jhoxOtM0NzyRbOqwmFQbqak3zSWJ6pYMCAl8/ntSWpUKumRPg2AXE1ufA9Bqe0WWcIwdZNcthnNp7N+FAo7Da1RfL4lWzm7MgfsDVESf+t+Kyvr/tC8vExs1QqFXqy+YE3MIkRACYOJ8Lww8YOhQJPXx/wpsVDc0NxDf9M/gMMNxhyYGJ+5gAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"xkcd: Python Environment - https://xkcd.com/1987\"\n        title=\"xkcd: Python Environment - https://xkcd.com/1987\"\n        src=\"/static/ac46617f34bab1f4930c36e2de8b25d8/fcda8/xkcd.png\"\n        srcset=\"/static/ac46617f34bab1f4930c36e2de8b25d8/12f09/xkcd.png 148w,\n/static/ac46617f34bab1f4930c36e2de8b25d8/e4a3f/xkcd.png 295w,\n/static/ac46617f34bab1f4930c36e2de8b25d8/fcda8/xkcd.png 590w,\n/static/ac46617f34bab1f4930c36e2de8b25d8/efc66/xkcd.png 885w,\n/static/ac46617f34bab1f4930c36e2de8b25d8/91b29/xkcd.png 983w\"\n        sizes=\"(max-width: 590px) 100vw, 590px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n      />\n  </a>\n    </span></p>\n<p>As ferramentas disponíveis para gerenciar projetos Python evoluíram muito nos últimos anos. Aqui na MLabs estamos acostumados a usar o pip, <a href=\"https://virtualenv.pypa.io/en/stable/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Virtualenv</a> e o <a href=\"https://github.com/pyenv/pyenv\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">pyenv</a> para gerenciar nossos projetos. Porém, sempre me pareceu que faltava algo mais fluído. Embora o uso do pip com as dependências listadas em um arquivo requirements.txt geralmente seja suficiente, em projetos maiores precisamos manter pelo menos dois arquivos separados com dependências diferentes para o ambiente de desenvolvimento e de produção. Ainda, caso tenhamos diversos projetos no nosso ambiente de desenvolvimento, precisamos usar explicitamente o Virtualenv para isolar as dependências com diferentes versões para cada projeto.</p>\n<h2>Pipenv</h2>\n<p>O Pipenv tem por objetivo melhorar o gerenciamento de projetos, trazendo para o desenvolvimento de aplicações Python o que existe de melhor em ferramentas como <a href=\"https://bundler.io/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Bundler</a> e <a href=\"https://yarnpkg.com/en/\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">Yarn</a>. Ele surgiu a um ano atrás e já se tornou o gerenciador de dependências <a href=\"https://packaging.python.org/tutorials/managing-dependencies/#managing-dependencies\" target=\"_blank\" rel=\"nofollow noopener noreferrer\">recomendado</a> para projetos Python.</p>\n<p>Com o Pipenv, podemos criar e gerenciar automaticamente ambientes virtuais isolados para cada projeto, fazer o gerenciamento das dependências do projeto e também instalar e atualizar ambientes de forma determinística. Se o pyenv estiver instalado, ele ainda instala automaticamente a versão do Python especificada no projeto.</p>\n<h2>Instalando</h2>\n<p>Para instalar:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pip <span class=\"token function\">install</span> --user pipenv\n<span class=\"token builtin class-name\">cd</span> projeto\npipenv <span class=\"token function\">install</span></code></pre></div>\n<p>Serão criados os arquivos <code class=\"language-text\">Pipfile</code> e <code class=\"language-text\">Pipfile.lock</code> no diretório do seu projeto. O Pipfile tem função similar ao do tradicional <code class=\"language-text\">requirements.txt</code> de listar as dependências e versões caso você precise reinstalá-las, porém possui algumas vantagens, como separar as dependências de cada ambiente e listar a versão do Python usada no projeto. O <code class=\"language-text\">Pipfile.lock</code> garante a instalação determinística das dependências quando o projeto é distribuído.</p>\n<h2>Convertendo um projeto existente</h2>\n<p>Converter seu projeto para o formato usando pelo Pipenv é fácil, apenas execute o comando abaixo:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pipenv <span class=\"token function\">install</span> -r requirements.txt</code></pre></div>\n<p>Revise o <code class=\"language-text\">Pipfile</code> gerado e separe suas dependências de produção e desenvolvimento. Seu <code class=\"language-text\">Pipfile</code> deve ficar parecido com este:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\"><span class=\"token punctuation\">[</span><span class=\"token punctuation\">[</span>source<span class=\"token punctuation\">]</span><span class=\"token punctuation\">]</span>\nurl <span class=\"token operator\">=</span> “https://pypi.python.org/simple\"\nverify_ssl <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span>\nname <span class=\"token operator\">=</span> “pypi”\n\n<span class=\"token punctuation\">[</span>packages<span class=\"token punctuation\">]</span>\nflask <span class=\"token operator\">=</span> “<span class=\"token operator\">==</span><span class=\"token number\">0.12</span>.2”\nflask-sqlalchemy <span class=\"token operator\">=</span> “<span class=\"token operator\">==</span><span class=\"token number\">2.2</span>”\nsqlalchemy <span class=\"token operator\">=</span> “<span class=\"token operator\">==</span><span class=\"token number\">1.2</span>.6”\npython-dotenv <span class=\"token operator\">=</span> “<span class=\"token operator\">==</span><span class=\"token number\">0.7</span>.1”\n\n<span class=\"token punctuation\">[</span>dev-packages<span class=\"token punctuation\">]</span>\n“flake8” <span class=\"token operator\">=</span> “*”\npytest <span class=\"token operator\">=</span> “*”\nflask-testing <span class=\"token operator\">=</span> “*”\nfeito <span class=\"token operator\">=</span> “*”\n\n<span class=\"token punctuation\">[</span>requires<span class=\"token punctuation\">]</span>\npython_version <span class=\"token operator\">=</span> “3.6”</code></pre></div>\n<h2>Recursos da ferramenta</h2>\n<p>Instalar e remover pacotes é fácil e intuitivo:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pipenv <span class=\"token function\">install</span> package\npipenv uninstall package</code></pre></div>\n<p>Para instalar pacotes usados apenas no ambiente de desenvolvimento:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pipenv <span class=\"token function\">install</span> --dev package</code></pre></div>\n<p>Para instalar todos os pacotes listados no Pipfile:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pipenv <span class=\"token function\">install</span></code></pre></div>\n<p>Incluindo os pacotes do ambiente de desenvolvimento:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pipenv <span class=\"token function\">install</span> --dev</code></pre></div>\n<p>Como o Pipenv gerencia para nós os ambientes virtuais e a versão do Python do projeto, precisamos usar alguns comandos para garantir que estamos executando nossos scripts dentro do ambiente virtual do projeto. Para executar um script:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pipenv run python script.py</code></pre></div>\n<p>E caso você queira ativar o ambiente virtual no seu shell atual, use:</p>\n<div class=\"gatsby-highlight\" data-language=\"bash\"><pre class=\"language-bash\"><code class=\"language-bash\">pipenv shell</code></pre></div>\n<p>Esse comando tera efeito similar ao <code class=\"language-text\">activate</code> do Virtualenv.</p>\n<p>Fiquei bem feliz em conhecer o Pipenv. Sempre senti que faltava uma ferramenta desse tipo no universo Python. A ferramenta já é reconhecida como a primeira opção para o gerenciamento de projetos Python, então recomendo a todos que estejam desenvolvendo em Python que testem ela em seus projetos, tenho certeza que o fluxo de desenvolvimento se tornará mais agradável.</p>","frontmatter":{"title":"Gerenciando Projetos Python","date":"May 02, 2018","description":"Neste artigo vou apresentar o Pipenv para gerenciar ambientes de desenvolvimento Python."}}},"pageContext":{"slug":"/gerenciando-projetos-python/","previous":{"fields":{"authors":"Alan R. Fachini","categories":["Essays"],"cover":null,"date":"2017-09-30T03:09:25.000Z","description":"Neste pequeno texto vou discutir alguns fatos recentes e como a reação de algumas pessoas, veículos de mídia e empresas fazem parecer que a Inteligência Artificial está muito mais avançada do que de fato está. Discutirei ainda quais são alguns dos problemas eminentes os quais não estamos dando a devida atenção.","id":"8443c7d9-11f7-52d8-a531-f47ea75f9364","images":null,"published":true,"slug":"/o-hype-da-ia-e-o-que-me-preocupa/","tags":["artificial intelligence","computer science","politics"],"title":"O hype da Inteligência Artificial e o que me preocupa"}},"next":{"fields":{"authors":"Alan R. Fachini","categories":["Software Engineering"],"cover":"essays/react-native-modules/images/react-native.png","date":"2018-09-28T23:17:13.000Z","description":"Desenvolvendo um módulo nativo para iteroperabilidade do React Native com o iOS.","id":"2ad685f1-6394-58f9-8246-6527ffadfe7a","images":["essays/react-native-modules/images/react-native.png"],"published":true,"slug":"/react-native-modules/","tags":["react","ios","react native","programming"],"title":"Desenvolvimento de módulo nativos para React Native"}}}},"staticQueryHashes":["1573948755","2077707862","3569324193","857530042"]}